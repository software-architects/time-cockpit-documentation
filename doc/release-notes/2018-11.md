# November 2018
## Web Client

### Generate Reports in Actions
The web client now supports the generation of [SSRS reports](https://www.timecockpit.com/blog/2014/03/31/Custom-Reporting-in-Time-Cockpit-is-Final) from within an action. Up to now, only the Full Client was able to generate a report with an action. This was because the action was able to save the result of the report generation on a users hard disk.

The web client uses a different approach. It temporarily saves a generated report to an [Azure Blob Storage](https://azure.microsoft.com/en-us/services/storage/blobs/) from where a user can download the report afterwards. The following example how to return a generated report in a time cockpit action

```python
clr.AddReference("System")
clr.AddReference("System.IO")
clr.AddReference("System.Text.Encoding")
clr.AddReference("TimeCockpit.Windows.Controls")
from System.Text import Encoding
from System.Collections.Generic import List, Dictionary, IEnumerable
from TimeCockpit.Data.QueryLanguage import QueryParameter
from TimeCockpit.Windows.Controls import ReportFormat
from TimeCockpit.Windows.Controls.Reporting import ReportBuilder, ReportConfiguration

def actionSample(actionContext):
	dataContext = actionContext.DataContext
	parameters = List[QueryParameter]()
	configuration = ReportConfiguration()
	data = Dictionary[String, IEnumerable[EntityObject]]()
	
	customerQuery = '''From Current In APP_Customer
	        Order By Current.APP_Code 
	        Select New With
	        {
	            .ObjectUuid = Current.APP_CustomerUuid,
	            Current.APP_Country,
	            Current.APP_Code,
	            Current.APP_CompanyName,
	            Current.APP_Phone,
	            Current.APP_Street,
	            Current.APP_ZipCode,
	            Current.APP_Town
	        }'''
	customers = dataContext.Select(customerQuery)
	data.Add("Customers", customers)
	
	userQuery = '''From U In APP_UserDetail Where U.APP_UserDetailUuid = @UserDetailUuid Select New With { U.Firstname, U.Lastname }'''
	users = dataContext.SelectWithParams({ "Query": userQuery, "@UserDetailUuid": dataContext.Environment.CurrentUser.UserDetailUuid })
	data.Add("User", users)
	        
	reportDefinition = # load report definition from e.g. EntityViewReport table
	        
	reportBuilder = ReportBuilder(dataContext)
	bytes = reportBuilder.GetReport(
		reportDefinition,
	    ReportFormat.Pdf, 
	    data, 
	    parameters, 
	    configuration)
			
	result = FileActionResult()
	result.ContentType = "text/plain"
	result.Inline = False
	result.FileDownloadName = "customer-report.pdf"
	result.FileContents = bytes
	actionContext.ActionResult = result
```

Basically, the only thing to do is to create an instance of `FileActionResult`, assign the generated report to `result.FileContents` and set the action's `ActionResult`.

### Support Multiple Datasets in Reports

### Performance Improvements in Timesheet Calendar

## Bug Fixes
* DisplayProperty in RelationCell was not used in HTML5 when query is auto generated
* Html encode tooltips in calendar
* Use USR_TimesheetUserDetailSelectionList in HTML5 client
* Error when hitting Strg + Left Mouse Button when Impersonated
* Fixed issue in digest cycle
